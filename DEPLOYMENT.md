# راهنمای دیپلوی ربات RSS به تلگرام

این مستندات روش‌های مختلف دیپلوی ربات RSS به تلگرام را توضیح می‌دهد.

## دیپلوی خودکار با Git

روش ترجیحی برای دیپلوی این پروژه استفاده از سیستم CI/CD Cloudflare Pages است که هر بار تغییرات به مخزن Git اصلی پوش شود، به‌طور خودکار دیپلوی می‌شود.

### مراحل راه‌اندازی دیپلوی خودکار

1. یک مخزن Git در GitHub یا GitLab ایجاد کنید
2. کد پروژه را به مخزن خود پوش کنید
3. وارد [داشبورد Cloudflare](https://dash.cloudflare.com) شوید
4. به بخش **Workers & Pages** بروید
5. روی **Create application** کلیک کنید
6. گزینه **Connect to Git** را انتخاب کنید
7. مخزن خود را به Cloudflare متصل کنید
8. تنظیمات زیر را وارد کنید:
   - **Project name**: `rss-telegram-bot` (یا نام دلخواه دیگر)
   - **Production branch**: `main` یا `master` (بسته به شاخه اصلی مخزن شما)
   - **Build command**: `npm run build` (یا خالی بگذارید اگر نیاز به بیلد ندارید)
   - **Build output directory**: `/` (یا دایرکتوری خروجی بیلد شما)

9. در بخش **Environment variables** متغیرهای محیطی زیر را تنظیم کنید:
   - `TELEGRAM_BOT_TOKEN`: توکن ربات تلگرام شما
   - سایر متغیرهای محیطی مورد نیاز

10. روی **Save and Deploy** کلیک کنید

پس از اتمام این مراحل، هر بار که تغییرات را به مخزن Git پوش کنید، Cloudflare به‌طور خودکار نسخه جدید را دیپلوی می‌کند.

### مشاهده لاگ‌ها و وضعیت دیپلوی

برای مشاهده وضعیت دیپلوی و لاگ‌های مربوطه:

1. به داشبورد Cloudflare بروید
2. به بخش **Workers & Pages** بروید
3. پروژه خود را انتخاب کنید
4. به تب **Deployments** بروید تا تاریخچه دیپلوی‌ها را ببینید
5. روی هر دیپلوی کلیک کنید تا جزئیات و لاگ‌ها را مشاهده کنید

## دیپلوی دستی با Wrangler CLI

اگر می‌خواهید به‌صورت دستی پروژه را دیپلوی کنید، می‌توانید از ابزار خط فرمان Wrangler استفاده کنید:

### نصب Wrangler

```bash
npm install -g wrangler
```

### ورود به حساب Cloudflare

```bash
wrangler login
```

### دیپلوی پروژه

```bash
# در دایرکتوری پروژه
wrangler publish
```

## تست قبل از دیپلوی

برای تست پروژه قبل از دیپلوی:

```bash
# اجرای لوکال برای تست
wrangler dev

# اجرای یکبار اسکریپت برای تست
node run-once.js
```

## عیب‌یابی دیپلوی

اگر با مشکلی در دیپلوی مواجه شدید:

1. مطمئن شوید فایل `wrangler.toml` به‌درستی تنظیم شده است
2. لاگ‌های دیپلوی را در داشبورد Cloudflare بررسی کنید
3. مطمئن شوید متغیرهای محیطی به‌درستی تنظیم شده‌اند
4. اگر از KV storage استفاده می‌کنید، مطمئن شوید namespace‌ها به‌درستی تعریف شده‌اند 